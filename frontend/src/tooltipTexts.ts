import { INDEX_LABELS, type IndexType } from './types/index'

export type TooltipTexts = ReturnType<typeof buildTooltips>

export function buildTooltips(indexType: IndexType, scoreMa = 200) {
  const indexName = INDEX_LABELS[indexType] ?? 'S&P500'
  const baseMaLabel = `${scoreMa}日移動平均線`

  return {
    score: {
      total:
        'テクニカル・マクロ・イベント補正を統合した 0〜100 の売り時スコアです。スコアが高いほど「利確寄り（割高）」と判定します。',
      label:
        '総合スコアの値から自動判定したテキストです。例：80以上＝利確を強く推奨、60〜80＝利確を検討、40〜60＝ホールド、40未満＝買い増し検討。',
      technical:
        `${indexName} の価格と移動平均線（20日・60日・200日）の位置関係や乖離率から計算したスコアです。高いほどテクニカル的に割高（利確寄り）です。`,
      macro: '金利・インフレ率・VIX などのマクロ指標の水準をもとにしたスコアです。高いほど株式市場に逆風の環境であることを意味します。',
      event:
        'FOMC や雇用統計など、直近の主要経済イベントの有無・重要度に応じて総合スコアに加算／減算する補正値です。イベントが近いほど大きくなります。',
      d: `${indexName} の現在値が ${baseMaLabel} からどれくらい離れているかを示す乖離率（%）です。プラスが大きいほど「長期平均より上振れ＝割高寄り」です。`,
      T_base:
        `テクニカルスコアのベース部分です。主に ${baseMaLabel} 乖離率などから算出した値で、0〜100 のスケールに正規化しています。`,
      T_trend:
        'トレンドの強さを 0〜10 で表した指標です。移動平均線の傾きや並び順から算出します。値が高いほど上昇トレンドが強い状態を示します。',
      macroM: '金利・インフレ率・VIX など複数のマクロ指標をまとめて 0〜100 に換算したマクロスコアです。高いほどマクロ環境が株式にとって厳しい状態です。',
    },
    simple: {
      alert:
        '総合スコアを4段階で判定し、「売り時かどうか」を直感的に表示するアラートです。詳しい指標が苦手な方向けの簡易ビューです。',
      pnl: '現在の評価額と取得総額から計算した含み損益の概算です。パーセンテージは取得総額に対する損益率を示します。',
      points:
        'テクニカル・マクロ・イベント・含み損益から今日の注目点を平易にまとめたメモです。',
    },
    position: {
      card: `${indexName} 連動の円建て投資信託について、自分の保有数量と平均取得単価（円）を入力するエリアです。`,
      quantity: '保有している投資信託の口数です。証券会社の画面に表示されている「保有数量」をそのまま入力します。',
      avgCost: '1口あたりの平均取得単価（円）です。買付時の平均コストを入力します。',
      submit: '入力された保有数量と平均取得単価から、現在の評価額と含み損益（円）を再計算します。',
      marketValue: `現在の ${indexName} 基準価額 × 保有数量 から計算した評価額（円）です。`,
      pnl: '評価額 − 取得総額（平均取得単価 × 保有数量）で計算した含み損益（円）です。プラスなら含み益、マイナスなら含み損です。',
      navSynthetic: `${indexName} 価格と USD/JPY 為替を掛け合わせて算出した参考基準価額（円）です。公式値が取得できない場合の目安として利用します。`,
      navOfficial: 'eMAXIS Slim 米国株式（S&P500）などの実際の基準価額（円）です。取得に失敗した場合は参考値のみを表示します。',
    },
    chart: {
      title: `直近期間の ${indexName} 終値と、20日・60日・200日移動平均線の推移をまとめたチャートです。横軸は日付、縦軸は指数レベルです。`,
      close: `${indexName} の終値の推移を表すラインです。`,
      ma20: `${indexName} の 20日移動平均線です。短期のトレンドを示します。`,
      ma60: `${indexName} の 60日移動平均線です。中期的なトレンドを示します。`,
      ma200: `${indexName} の 200日移動平均線です。長期のトレンドや「平常値」の目安として使います。`,
    },
    macro: {
      rate: '米10年国債利回りの現在値が、過去10年のレンジの中でどの位置にあるかを %tile で示しています。値が高いほど金利水準が高く、株式には逆風になりやすいです。',
      cpi: '米国CPI（インフレ率）の現在値の高さを、過去10年のレンジに対する %tile で示しています。値が高いほどインフレが強く、引き締め方向の圧力が強い状態です。',
      vix: 'VIX 指数（恐怖指数）が過去10年の中でどの水準にあるかを %tile で示しています。値が高いほど市場のボラティリティが高く、リスクオフ傾向が強い状態です。',
      chip: '指標の水準に応じた簡易ラベルです。色や文言で「警戒」「加速」「注意」などのニュアンスを示します。',
    },
    event: {
      title: '直近で予定されている重要な経済イベント（FOMC、雇用統計など）を表示します。売り時スコアのイベント補正の元データになります。',
      name: 'イベント名です。ここでは米国雇用統計（Nonfarm Payrolls）などを表示します。',
      datetime: 'イベントが発表される予定の日付と時刻です。発表前後は値動きが荒くなりやすいため注意が必要です。',
      importance: 'そのイベントが市場に与えるインパクトの大きさを 1〜5 で表した指標です。数字が大きいほど重要度が高いイベントです。',
      adjustment: 'このイベントによって総合スコアに加えられている補正値です。イベントが近づくと正または負の値になり、スコアに影響します。',
    },
  }
}
